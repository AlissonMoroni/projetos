;/*FB_PKG_DELIM*/

__d("MWPThreadThemeGradientUtils",["MWPColorUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=a.outgoingGradientColors;a=a.threadTheme;b=b[0];return(b=b==null?void 0:b.color)!=null?b:a.fallbackColor}function a(a){return d("MWPColorUtils").int64ToHex(h(a))}function i(a){var b=a.outgoingGradientColors;a=a.threadTheme;b=b[b.length-1];return(b=b==null?void 0:b.color)!=null?b:a.fallbackColor}function b(a){return d("MWPColorUtils").int64ToHex(i(a))}function c(a){return a.outgoingGradientColors.length>1}g.getTopGradientColorI64=h;g.getTopGradientColor=a;g.getBottomGradientColorI64=i;g.getBottomGradientColor=b;g.isGradient=c}),98);
__d("useMWIsBroadcastChannelViewer",["LSMessagingThreadTypeUtil","MWLSThread","MWPActor.react","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b,e=(h||(h=c("useReStore")))(),g=d("MWPActor.react").useActor(),i=(b=d("MWLSThread").useThread(a,function(a){return d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)}))!=null?b:!1;b=(b=d("ReQLSuspense").useFirst(function(){return a!=null&&i?d("ReQL").fromTableAscending(e.tables.participants).getKeyRange(a,g).map(function(a){return a.isAdmin!==!0&&a.isSuperAdmin!==!0&&a.isModerator!==!0}):d("ReQL").empty()},[e,a,g,i],f.id+":31"))!=null?b:!1;return i&&b}g["default"]=a}),98);
__d("MWPThemeCSSProvider.react",["BaseTheme.react","I64","LSIntEnum","MWLSThread","MWLSThreadDisplayContext","MWPColorUtils","MWPThreadThemeGradientUtils","MWThreadKey.react","MWV2IsTabFocusedContext.react","MessengerAppColorMode","gkx","react","useMWIsBroadcastChannelViewer","useMWPThreadTheme"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react")),l=h.useMemo,m={expand:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",maxWidth:"x193iq5w",$$css:!0}};function n(a,b){b=(b=d("MWLSThread").useThread(b,function(a){return(i||(i=d("I64"))).lt(a.lastReadWatermarkTimestampMs,a.lastActivityTimestampMs)}))!=null?b:!1;return b&&!a}function o(){var a=d("MWThreadKey.react").useMWThreadKeyMemoized(),b=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext()==="ChatTab",e=d("MWV2IsTabFocusedContext.react").useIsTabFocused(),f=n(e,a),g=c("useMWIsBroadcastChannelViewer")(a),h=c("useMWPThreadTheme")();return l(function(){var a,k=c("gkx")("24125"),l=c("gkx")("24057"),m=h.backgroundGradientColors,n=h.incomingGradientColors,o=h.outgoingGradientColors,p=h.threadTheme,q=p.appColorMode,r=p.backgroundUrl,s=p.composerBackgroundColor,t=p.composerInputBackgroundColor,u=p.composerInputBorderColor,v=p.composerInputBorderWidth,w=p.composerInputTextPlaceholderColor,x=p.composerPlaceholderTextColor,y=p.composerTintColor,z=p.deliveryReceiptColor,A=p.fallbackColor,B=p.incomingMessageBorderColor,C=p.incomingMessageBorderWidth,D=p.incomingMessageTextColor,E=p.messageBorderColor,F=p.messageBorderWidth,G=p.messageTextColor,H=p.primaryButtonBackgroundColor,I=p.quotedIncomingMessageBubbleColor,J=p.reactionPillBackgroundColor,K=p.secondaryTextColor,L=p.tertiaryTextColor,M=p.titlebarAttributionTextColor,N=p.titlebarBackgroundColor,O=p.titlebarButtonTintColor;p=p.titlebarTextColor;q=(i||(i=d("I64"))).equal(q,(j||(j=d("LSIntEnum"))).ofNumber(c("MessengerAppColorMode").DARK));r=Boolean(r==null?void 0:r.length);var P=o.length>1,Q=m.length>0;r=k&&(r||Q);Q=r&&"4px"||"0px";l=l?"96px":g?"28px":"84px";O=k&&O||d("MWPThreadThemeGradientUtils").getTopGradientColorI64(h);var R=k&&y||d("MWPThreadThemeGradientUtils").getBottomGradientColorI64(h);m=m==null?void 0:(m=m[(m==null?void 0:m.length)-1])==null?void 0:m.color;n=n==null?void 0:(n=n[0])==null?void 0:n.color;a=(a=o==null?void 0:(a=o[o.length-1])==null?void 0:a.color)!=null?a:A;o=o&&o.length>1&&d("MWPColorUtils").gradient(o,b?{footerHeight:56,headerHeight:48,totalHeight:455}:void 0);L={"chat-admin-text-color":k&&(K||L),"chat-composer-background-color":k&&s,"chat-composer-button-color":R,"chat-composer-caret-color":k&&R,"chat-composer-input-background-color":k&&t||"var(--comment-background)","chat-composer-input-border-color":k&&u,"chat-composer-input-border-width":k&&v,"chat-composer-input-text-placeholder-color":k&&w,"chat-composer-placeholder-text-color":k&&x,"chat-delivery-receipt-color":k&&z,"chat-edit-message-overlay-color":(K=m)!=null?K:"var(--surface-background)","chat-incoming-message-border-color":k&&B,"chat-incoming-message-border-width":k&&C,"chat-incoming-message-bubble-background-color":k&&n,"chat-incoming-message-text-color":k&&D,"chat-message-border-color":k&&E,"chat-message-border-width":k&&F,"chat-message-text-color":k&&G,"chat-outgoing-message-background-gradient":!r&&o?o:"initial","chat-outgoing-message-bubble-background-color":P&&!r?"transparent":a,"chat-primary-button-background-color":k&&H,"chat-quoted-incoming-message-bubble-color":k&&I,"chat-replied-message-background-color":k&&m&&n&&d("MWPColorUtils").combineColors(m,n,.4),"chat-scrollbar-thumb-color":r&&d("MWPColorUtils").int64ToRGBA(d("MWPColorUtils").combineColorsAsI64(d("MWPColorUtils").combineColorsAsI64(a,m,.6),q?(i||(i=d("I64"))).of_int32(16777215):(i||(i=d("I64"))).of_int32(0),.6),.7),"chat-scrollbar-track-color":r&&"transparent","mwp-header-background-color":k&&N,"mwp-header-button-color":O,"mwp-header-text-color":k&&p,"mwp-message-list-actions-gap":Q,"mwp-message-list-actions-width":"calc("+l+" + 3*"+Q+")","mwp-message-row-background":r?"transparent":"var(--messenger-card-background)","mwp-primary-theme-color":A,"mwp-subheader-text-color":k&&M,"reaction-pill-background-color":k&&J,"reaction-pill-multireact-selected-color":d("MWPColorUtils").combineColorsAsI64(A,i.of_int32(16777215),.22),"text-highlight":k&&y&&d("MWPColorUtils").int64ToRGBA(y,q?.5:.2)};e||(k?(L["chat-composer-button-color"]=d("MWPColorUtils").int64ToRGBA(R,.6),L["mwp-header-button-color"]=d("MWPColorUtils").int64ToRGBA(O,.6)):(L["chat-composer-button-color"]="var(--disabled-icon)",L["mwp-header-button-color"]="var(--disabled-icon)"));f&&(L["mwp-header-button-color"]="var(--always-white)",L["mwp-header-text-color"]="var(--always-white)",L["mwp-header-background-color"]=O);(L["mwp-subheader-text-color"]==null||typeof L["mwp-subheader-text-color"]==="boolean")&&(L["mwp-subheader-text-color"]=L["mwp-header-text-color"]);s={};for(t in L){u=L[t];if(u==null||typeof u==="boolean")continue;else typeof u==="string"?s[t]=u:s[t]=d("MWPColorUtils").int64ToHex(u)}return s},[g,b,f,e,h])}function a(a){var b=o();return k.jsx(c("BaseTheme.react"),babelHelpers["extends"]({},a,{config:{dark:b,light:b,type:"VARIABLES"},xstyle:[m.expand,a.xstyle]}))}a.displayName=a.name+" [from "+f.id+"]";g.MWPThemeCSSProvider=a}),98);
__d("MWPThreadThemeProviderQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7801872189881330"}),null);
__d("MWPThreadThemeProviderQuery.graphql",["MWPThreadThemeProviderQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],c=[{kind:"Variable",name:"id",variableName:"id"}],d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"accessibility_label",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"app_color_mode",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"composer_background_color",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"background_gradient_colors",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"is_deprecated",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"title_bar_button_tint_color",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"inbound_message_gradient_colors",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"title_bar_text_color",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"composer_tint_color",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"title_bar_attribution_color",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"composer_input_background_color",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"hot_like_color",storageKey:null},r=[d,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],s={alias:null,args:null,concreteType:"MessengerThreadBackgroundAsset",kind:"LinkedField",name:"background_asset",plural:!1,selections:r,storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"message_text_color",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"message_border_color",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"message_border_width",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"inbound_message_text_color",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"inbound_message_border_color",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"inbound_message_border_width",storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"primary_button_background_color",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"title_bar_background_color",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"tertiary_text_color",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"reverse_gradients_for_radial",storageKey:null},D={alias:null,args:null,kind:"ScalarField",name:"reaction_pill_background_color",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"secondary_text_color",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"fallback_color",storageKey:null},G={alias:null,args:null,kind:"ScalarField",name:"gradient_colors",storageKey:null},H={alias:null,args:null,kind:"ScalarField",name:"normal_theme_id",storageKey:null};r={alias:null,args:null,concreteType:"MessengerThreadThemeIconAsset",kind:"LinkedField",name:"icon_asset",plural:!1,selections:r,storageKey:null};d=[d,e,f,g,h,i,j,k,l,m,n,o,p,q,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,r,{alias:null,args:null,concreteType:"MessengerThreadTheme",kind:"LinkedField",name:"alternative_themes",plural:!0,selections:[d,e,f,g,h,i,j,k,l,m,n,o,p,q,s,t,u,v,w,x,y,H,z,A,B,C,D,E,F,G,r],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWPThreadThemeProviderQuery",selections:[{alias:null,args:c,concreteType:"MessengerThreadTheme",kind:"LinkedField",name:"messenger_thread_theme",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"MWPThreadThemeQuery_Fragment",selections:d,args:null,argumentDefinitions:[]}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWPThreadThemeProviderQuery",selections:[{alias:null,args:c,concreteType:"MessengerThreadTheme",kind:"LinkedField",name:"messenger_thread_theme",plural:!1,selections:d,storageKey:null}]},params:{id:b("MWPThreadThemeProviderQuery_facebookRelayOperation"),metadata:{},name:"MWPThreadThemeProviderQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWPThreadThemeProvider.react",["CometRelay","I64","Int64Hooks","LSIntEnum","MWPThemeCSSProvider.react","MWPThreadThemeContext","MWPThreadThemeProviderQuery.graphql","MessengerThreadThemeGradientType","ReQL","ReQLSuspense","RelayHooks","cr:6797","cr:8933","defaultMWPThreadTheme","promiseDone","react","useCurrentDisplayMode","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=l||(l=d("react"));e=l;var n=e.useMemo,o=e.useState;function p(a,e){var g=(i||(i=c("useReStore")))(),l=c("useCurrentDisplayMode")(),m=d("ReQLSuspense").useFirst(function(){return a==null?d("ReQL").empty():d("ReQL").fromTableAscending(g.tables.thread_themes).getKeyRange(a)},[g,a],f.id+":41"),o=b("cr:6797")==null?void 0:b("cr:6797")(g,a),p=l==="dark"&&o!=null?o:m,q=d("ReQLSuspense").useArray(function(){return(p==null?void 0:p.fbid)==null?d("ReQL").empty():d("ReQL").fromTableAscending(g.tables.gradient_colors).getKeyRange(p==null?void 0:p.fbid)},[g,p==null?void 0:p.fbid],f.id+":55"),r=d("CometRelay").useRelayEnvironment();d("Int64Hooks").useEffectInt64(function(){p==null&&a!=null&&b("cr:8933")!=null&&c("promiseDone")(d("RelayHooks").fetchQuery(r,h!==void 0?h:h=b("MWPThreadThemeProviderQuery.graphql"),{id:(j||(j=d("I64"))).to_string(a)}).toPromise().then(function(a){return b("cr:8933").insertGraphQLThemeResponseIntoDatabase(a==null?void 0:a.messenger_thread_theme)}))},[a,p,r,g]);return n(function(){return p!=null?{backgroundGradientColors:q.filter(function(a){return(j||(j=d("I64"))).equal(a.type_,(k||(k=d("LSIntEnum"))).ofNumber(c("MessengerThreadThemeGradientType").THREADVIEW_BACKGROUND))}),incomingGradientColors:q.filter(function(a){return(j||(j=d("I64"))).equal(a.type_,(k||(k=d("LSIntEnum"))).ofNumber(c("MessengerThreadThemeGradientType").MESSAGE_BUBBLE_INBOUND))}),outgoingGradientColors:q.filter(function(a){return(j||(j=d("I64"))).equal(a.type_,(k||(k=d("LSIntEnum"))).ofNumber(c("MessengerThreadThemeGradientType").MESSAGE_BUBBLE_OUTBOUND))}),threadTheme:p}:e},[p,q,e])}function a(a){var b=a.children,c=a.defaultTheme;c=c===void 0?d("defaultMWPThreadTheme").defaultThemeWithColors:c;var e=a.themeFbid;a=o();var f=a[0],g=a[1];a=d("Int64Hooks").useMemoInt64(function(){var a;return(a=f)!=null?a:e},[e,f]);var h=p(a,c);a=d("Int64Hooks").useMemoInt64(function(){return{backgroundGradientColors:h.backgroundGradientColors,incomingGradientColors:h.incomingGradientColors,outgoingGradientColors:h.outgoingGradientColors,previewId:f,setPreviewId:g,threadTheme:h.threadTheme}},[h,f]);return m.jsx(d("MWPThreadThemeContext").MWPThreadThemeContext.Provider,{value:a,children:m.jsx(d("MWPThemeCSSProvider.react").MWPThemeCSSProvider,{children:b})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);